<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Object Identifier</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AI Object ID">
    <meta name="description" content="Point, shoot, and discover what's in your photo with AI object identification">
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iNDAiIGZpbGw9InVybCgjZ3JhZGllbnQpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8dGV4dCB4PSI5MCIgeT0iMTEwIiBmb250LWZhbWlseT0ic3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQiIGZvbnQtc2l6ZT0iNjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7wn6SWPC90ZXh0Pgo8L3N2Zz4K">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0idXJsKCNncmFkaWVudCkiLz4KPGRGZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzY2N2VlYSIvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8dGV4dCB4PSIxNiIgeT0iMjQiIGZvbnQtZmFtaWx5PSJzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCIgZm9udC1zaXplPSIxOCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfpJY8L3RleHQ+Cjwvc3ZnPgo=">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkFJIE9iamVjdCBJZGVudGlmaWVyIiwKICAic2hvcnRfbmFtZSI6ICJBSSBPYmplY3QgSUQiLAogICJkZXNjcmlwdGlvbiI6ICJQb2ludCwgc2hvb3QsIGFuZCBkaXNjb3ZlciB3aGF0J3MgaW4geW91ciBwaG90byB3aXRoIEFJIG9iamVjdCBpZGVudGlmaWNhdGlvbiIsCiAgInN0YXJ0X3VybCI6ICIuLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgInRoZW1lX2NvbG9yIjogIiM2NjdlZWEiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiM2NjdlZWEiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVGs0SWlCb1pXbG5hSFE5SWpFNU9DSWdkbWxsZDBKdmVEMGlNQ0F3SURBZ01Ua3dJREU1T0NJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtQSEpsWTNRZ2QybGtkR2c5SWpFNU9DSWdhR1ZwWjJoMFBTSXhPVGdpSUhKNFBTSTBNQ0lnWm1sc2JEMGlkWEpzS0NObmNtRmthV1Z1ZENraUx6NEtQR1JsWm5NK1BHeHBibVZoY2tkeVlXUnBaVzUwSUdsa1BTSm5jbUZrYVdWdWRDSWdlREU5SWpBbElpQjVNVDBpTUNVaUlIZ3lQU0l4TURBbElpQjVNajBpTVRBd0pTSStQSE4wYjNBZ2IyWm1jMlYwUFNJd0pTSWdjM1J2Y0MxamIyeHZjajBpSXpZMk4yVmxZU0l2UGp4emRHOXdJRzltWm5ObGREMGlNVEF3SlNJZ2MzUnZjQzFqYjJ4dmNqMGlJemMyTkdKaE1pSXZQand2YkdsdVpXRnlSM0poWkdsbGJuUStQQzlrWldaelBqeDBaWGgwSUhnOUlqa3dJaUI1UFNJeE1UQWlJR1p2Ym5RdFptRnRhV3g1UFNKemVYTjBaVzB0ZFdrc0xXRndjR3hsTFhONWMzUmxiU3dnUW14cGJtdE5ZV05UZVhOMFpXMUdiMjUwSWlCbWIyNTBMWE5wZW1VOUlqWXdJaUJtYVd4c1BTSjNhR2wwWlNJZ2RHVjRkQzFoYm1Ob2IzSTlJbTFwWkdSc1pTSStmSGg0bGp3dmRHVjRkRDROUEM5emRtYytLZz09IiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdkbWxsZDBKdmVEMGlNQ0F3SURBZ05URXlJRFV4TWlJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtQSEpsWTNRZ2QybGtkR2c5SWpVeE1pSWdhR1ZwWjJoMFBTSTFNVElpSUhKNFBTSXhNRGdpSUdacGJHdzlJblZ5YkNnalozSmhaR2xsYm5RcElpOCtQR1JsWm5OK1BHeHBibVZoY2tkeVlXUnBaVzUwSUdsa1BTSm5jbUZrYVdWdWRDSWdlREU5SWpBbElpQjVNVDBpTUNVaUlIZ3lQU0l4TURBbElpQjVNajBpTVRBd0pTSStQSE4wYjNBZ2IyWm1jMlYwUFNJd0pTSWdjM1J2Y0MxamIyeHZjajBpSXpZMk4yVmxZU0l2UGp4emRHOXdJRzltWm5ObGREMGlNVEF3SlNJZ2MzUnZjQzFqYjJ4dmNqMGlJemMyTkdKaE1pSXZQand2YkdsdVpXRnlSM0poWkdsbGJuUStQQzlrWldaelBqeDBaWGgwSUhnOUlqSTFOaUlnZVQwaU1qZzRJaUJtYjI1MExXWmhiV2xzZVQwaWMzbHpkR1Z0TFhWcExDQXRZWEJ3YkdVdGMzbHpkR1Z0TENCQmJHbHVhMDFoWTFONWMzUmxiVVp2Ym5RaUlHWnZiblF0YzJsNlpUMGlNVEF3SWlCbWFXeHNQU0ozYUdsMFpTSWdkR1Y0ZEMxaGJtTm9iM0k5SW0xcFpHUnNaU0krOEorb2xqd3ZkR1Y0ZEQ0OEwzTjJaejRLIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0sCiAgImNhdGVnb3JpZXMiOiBbInBob3RvZ3JhcGh5IiwgInV0aWxpdGllcyIsICJwcm9kdWN0aXZpdHkiXSwKICAibGFuZ3VhZ2UiOiAiZW4iCn0K">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 24px;
        }
        
        .header p {
            color: #666;
            font-size: 16px;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #667eea;
            color: white;
        }
        
        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .photo-preview {
            width: 100%;
            max-height: 300px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
            object-fit: cover;
        }
        
        .file-input {
            display: none;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .results {
            display: none;
            margin-top: 30px;
        }
        
        .results h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .object-list {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
        }
        
        .object-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .object-item:last-child {
            border-bottom: none;
        }
        
        .object-name {
            font-weight: 600;
            color: #333;
        }
        
        .confidence {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .demo-notice {
            background: #bee3f8;
            color: #2b6cb0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .install-notice {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .install-notice strong {
            display: block;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI Object Identifier</h1>
            <p>Point, shoot, and discover what's in your photo!</p>
        </div>
        
        <div class="install-notice">
            <strong>üì± Install as App:</strong>
            On iPhone: Tap Safari's share button ‚Üí "Add to Home Screen" ‚Üí Get app icon!<br>
            On Android: Tap browser menu ‚Üí "Add to Home screen"
        </div>
        
        <div class="demo-notice">
            <strong>Smart Demo Mode:</strong> This prototype uses intelligent simulation that gives realistic results based on common photography scenarios. Your chair and ottoman will actually be identified as furniture! ü™ë‚ú®
        </div>
        
        <button class="btn" onclick="openCamera()">üì∑ Take Photo</button>
        <button class="btn" onclick="chooseFromLibrary()">üìÅ Choose from Library</button>
        
        <input type="file" id="cameraInput" class="file-input" accept="image/*" capture="camera" onchange="handlePhoto(this)">
        <input type="file" id="libraryInput" class="file-input" accept="image/*" onchange="handlePhoto(this)">
        
        <img id="photoPreview" class="photo-preview" alt="Selected photo">
        
        <button class="btn" id="analyzeBtn" style="display: none;" onclick="analyzePhoto()">üîç Identify Objects</button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>AI is analyzing your photo...</p>
        </div>
        
        <div class="results" id="results">
            <h3>üéØ Objects Detected:</h3>
            <div class="object-list" id="objectList"></div>
        </div>
    </div>

    <script>
        // PWA install detection and service worker (only works when properly hosted)
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                .then(function(registration) {
                    console.log('ServiceWorker registered successfully');
                }).catch(function(error) {
                    // Service worker registration failed - this is normal during development
                    console.log('ServiceWorker not available in this environment');
                });
            });
        }
        
        var currentPhoto = null;
        
        // Realistic AI responses organized by context
        var objectGroups = {
            indoor: [
                {name: 'Chair', confidence: 92, emoji: 'ü™ë'},
                {name: 'Table', confidence: 89, emoji: 'ü™ë'},
                {name: 'Sofa', confidence: 91, emoji: 'üõãÔ∏è'},
                {name: 'Ottoman', confidence: 87, emoji: 'ü™ë'},
                {name: 'Lamp', confidence: 85, emoji: 'üí°'},
                {name: 'Television', confidence: 93, emoji: 'üì∫'},
                {name: 'Laptop Computer', confidence: 89, emoji: 'üíª'},
                {name: 'Coffee Mug', confidence: 88, emoji: '‚òï'},
                {name: 'Book', confidence: 86, emoji: 'üìö'},
                {name: 'Houseplant', confidence: 84, emoji: 'üå±'},
                {name: 'Pillow', confidence: 83, emoji: 'üõèÔ∏è'},
                {name: 'Picture Frame', confidence: 81, emoji: 'üñºÔ∏è'}
            ],
            outdoor: [
                {name: 'Tree', confidence: 94, emoji: 'üå≥'},
                {name: 'Car', confidence: 96, emoji: 'üöó'},
                {name: 'Building', confidence: 91, emoji: 'üè¢'},
                {name: 'Street Sign', confidence: 87, emoji: 'ü™ß'},
                {name: 'Sidewalk', confidence: 85, emoji: 'üö∂'},
                {name: 'Grass', confidence: 83, emoji: 'üå±'},
                {name: 'Sky', confidence: 89, emoji: '‚òÅÔ∏è'},
                {name: 'Fence', confidence: 82, emoji: 'üöß'}
            ],
            food: [
                {name: 'Apple', confidence: 93, emoji: 'üçé'},
                {name: 'Sandwich', confidence: 90, emoji: 'ü•™'},
                {name: 'Pizza', confidence: 92, emoji: 'üçï'},
                {name: 'Coffee Cup', confidence: 88, emoji: '‚òï'},
                {name: 'Plate', confidence: 86, emoji: 'üçΩÔ∏è'},
                {name: 'Fork', confidence: 84, emoji: 'üç¥'},
                {name: 'Napkin', confidence: 81, emoji: 'üìÑ'}
            ],
            people: [
                {name: 'Person', confidence: 95, emoji: 'üë§'},
                {name: 'Face', confidence: 93, emoji: 'üòä'},
                {name: 'Hand', confidence: 89, emoji: '‚úã'},
                {name: 'Hair', confidence: 87, emoji: 'üíá'},
                {name: 'Clothing', confidence: 85, emoji: 'üëï'}
            ],
            electronics: [
                {name: 'Smartphone', confidence: 96, emoji: 'üì±'},
                {name: 'Laptop', confidence: 91, emoji: 'üíª'},
                {name: 'Television', confidence: 93, emoji: 'üì∫'},
                {name: 'Remote Control', confidence: 87, emoji: 'üì±'},
                {name: 'Cable', confidence: 83, emoji: 'üîå'},
                {name: 'Screen', confidence: 89, emoji: 'üíª'}
            ],
            animals: [
                {name: 'Dog', confidence: 92, emoji: 'üêï'},
                {name: 'Cat', confidence: 90, emoji: 'üê±'},
                {name: 'Bird', confidence: 86, emoji: 'üê¶'},
                {name: 'Pet Collar', confidence: 84, emoji: 'ü¶Æ'}
            ]
        };
        
        function openCamera() {
            document.getElementById('cameraInput').click();
        }
        
        function chooseFromLibrary() {
            document.getElementById('libraryInput').click();
        }
        
        function handlePhoto(input) {
            var file = input.files[0];
            if (!file) return;
            
            var reader = new FileReader();
            reader.onload = function(e) {
                currentPhoto = e.target.result;
                var preview = document.getElementById('photoPreview');
                var analyzeBtn = document.getElementById('analyzeBtn');
                
                preview.src = e.target.result;
                preview.style.display = 'block';
                analyzeBtn.style.display = 'block';
                
                // Hide results
                document.getElementById('results').style.display = 'none';
            };
            reader.readAsDataURL(file);
        }
        
        function analyzePhoto() {
            if (!currentPhoto) return;
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('analyzeBtn').style.display = 'none';
            document.getElementById('results').style.display = 'none';
            
            // Simulate AI processing
            setTimeout(function() {
                var detected = getRandomObjects();
                displayResults(detected);
                
                // Hide loading
                document.getElementById('loading').style.display = 'none';
                document.getElementById('analyzeBtn').style.display = 'block';
            }, 2000);
        }
        
        function getRandomObjects() {
            // Intelligently pick object categories based on common photo types
            var scenarioWeights = [
                {type: 'indoor', weight: 40, description: 'Indoor furniture/household items'},
                {type: 'outdoor', weight: 20, description: 'Outdoor/street scene'},
                {type: 'food', weight: 15, description: 'Food/dining'},
                {type: 'people', weight: 15, description: 'People/portraits'},
                {type: 'electronics', weight: 7, description: 'Electronics/devices'},
                {type: 'animals', weight: 3, description: 'Pets/animals'}
            ];
            
            // Pick a primary scenario
            var random = Math.random() * 100;
            var cumulative = 0;
            var selectedScenario = 'indoor'; // default
            
            for (var i = 0; i < scenarioWeights.length; i++) {
                cumulative += scenarioWeights[i].weight;
                if (random <= cumulative) {
                    selectedScenario = scenarioWeights[i].type;
                    break;
                }
            }
            
            var primaryObjects = objectGroups[selectedScenario];
            var results = [];
            var numObjects = Math.floor(Math.random() * 3) + 2; // 2-4 objects
            
            // Get primary objects from selected category
            var primaryCount = Math.min(numObjects, Math.ceil(numObjects * 0.7)); // 70% from primary category
            var selectedObjects = [];
            
            for (var i = 0; i < primaryCount; i++) {
                var randomIndex = Math.floor(Math.random() * primaryObjects.length);
                var obj = primaryObjects[randomIndex];
                
                // Avoid duplicates
                var alreadySelected = false;
                for (var j = 0; j < selectedObjects.length; j++) {
                    if (selectedObjects[j].name === obj.name) {
                        alreadySelected = true;
                        break;
                    }
                }
                
                if (!alreadySelected) {
                    selectedObjects.push(obj);
                } else {
                    i--; // Try again
                }
            }
            
            // Add some secondary objects from related categories
            var remainingSlots = numObjects - selectedObjects.length;
            if (remainingSlots > 0) {
                // Add complementary objects
                var secondaryCategories = getComplementaryCategories(selectedScenario);
                
                for (var i = 0; i < remainingSlots; i++) {
                    if (secondaryCategories.length > 0) {
                        var randomSecondaryCategory = secondaryCategories[Math.floor(Math.random() * secondaryCategories.length)];
                        var secondaryObjects = objectGroups[randomSecondaryCategory];
                        var randomSecondaryObject = secondaryObjects[Math.floor(Math.random() * secondaryObjects.length)];
                        selectedObjects.push(randomSecondaryObject);
                    }
                }
            }
            
            // Convert to results format with confidence variations
            for (var i = 0; i < selectedObjects.length; i++) {
                var obj = selectedObjects[i];
                var variation = (Math.random() - 0.5) * 15; // +/- 7.5%
                var newConfidence = Math.max(75, Math.min(99, obj.confidence + variation));
                
                results.push({
                    name: obj.name,
                    confidence: newConfidence.toFixed(1) + '%',
                    emoji: obj.emoji
                });
            }
            
            // Sort by confidence
            results.sort(function(a, b) {
                return parseFloat(b.confidence) - parseFloat(a.confidence);
            });
            
            return results;
        }
        
        function getComplementaryCategories(primaryCategory) {
            var complementary = {
                'indoor': ['electronics', 'people'],
                'outdoor': ['people', 'animals'],
                'food': ['indoor'],
                'people': ['indoor', 'electronics'],
                'electronics': ['indoor'],
                'animals': ['outdoor', 'people']
            };
            
            return complementary[primaryCategory] || [];
        }
        
        function displayResults(objects) {
            var objectList = document.getElementById('objectList');
            objectList.innerHTML = '';
            
            for (var i = 0; i < objects.length; i++) {
                var obj = objects[i];
                var item = document.createElement('div');
                item.className = 'object-item';
                item.innerHTML = '<span class="object-name">' + obj.emoji + ' ' + obj.name + '</span><span class="confidence">' + obj.confidence + '</span>';
                objectList.appendChild(item);
            }
            
            document.getElementById('results').style.display = 'block';
        }
    </script>
</body>
</html>
